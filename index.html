<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Tri √¢n c√¥ Thu·∫ßn</title>
  <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="card">
    <h1>Th∆∞ Tri √Çn G·ª≠i C√¥ <span style="color:#007acc">Thu·∫ßn</span></h1>
    <p id="typing-text" style="min-height: 60px;"></p>
    <button onclick="toggleCode()" id="toggleCodeBtn">üìÇ Hi·ªán source code</button>
    <div class="code-block" id="code" style="display: none;">
def tri_an_co_giao():
    co_giao = "C√¥ Thu·∫ßn"
    cam_on = f"C·∫£m ∆°n {co_giao} v√¨ nh·ªØng gi·ªù h·ªçc vui v·∫ª!"
    tri_an = f"{co_giao}, ch√∫ng em c·∫£m ∆°n c√¥ r·∫•t nhi·ªÅu!"
    return cam_on + "\n " + tri_an

print(tri_an_co_giao())
    </div>

    <button onclick="runPython()">Ch·∫°y code Python</button>
    <div id="output">‚è≥ K·∫øt qu·∫£ s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y...</div>
  </div>

  <script>
    let pyodideReady = false;
    let pyodide;

    // T·∫£i Pyodide v√† c√°c g√≥i ph·ª• tr·ª£
    async function loadPyodideAndPackages() {
      pyodide = await loadPyodide();
      pyodideReady = true;
    }

    // G·ªçi h√†m t·∫£i Pyodide khi trang ƒë∆∞·ª£c t·∫£i
    loadPyodideAndPackages();

    async function runPython() {
      if (!pyodideReady) {
        document.getElementById("output").innerText = "‚è≥ ƒêang t·∫£i Pyodide...";
        return;
      }

      const code = document.getElementById("code").innerText;
      let output = "";

      // B·∫Øt stdout
      const originalStdout = pyodide.setStdout({
        batched: (s) => output += s
      });

      try {
        // Ch·∫°y m√£ Python v√† hi·ªÉn th·ªã k·∫øt qu·∫£
        await pyodide.runPythonAsync(code);
        document.getElementById("output").innerText = output.trim();
      } catch (err) {
        document.getElementById("output").innerText = "‚ùå L·ªói: " + err;
      } finally {
        pyodide.setStdout(originalStdout); // Kh√¥i ph·ª•c stdout g·ªëc
      }
    }
    function toggleCode() {
        const codeBlock = document.getElementById("code");
        const toggleBtn = document.getElementById("toggleCodeBtn");

        if (codeBlock.style.display === "none") {
          codeBlock.style.display = "block";
          toggleBtn.innerText = "üìÅ ·∫®n code Python";
        } else {
          codeBlock.style.display = "none";
          toggleBtn.innerText = "üìÇ Hi·ªán code Python";
        }
      }
    const message = "Ch√∫ng em xin g·ª≠i l·ªùi c·∫£m ∆°n ch√¢n th√†nh ƒë·∫øn c√¥ ‚Äì ng∆∞·ªùi ƒë√£ d·∫°y ch√∫ng em t·ª´ng d√≤ng code.";
      const typingElement = document.getElementById("typing-text");
      let index = 0;

      function typeEffect() {
        if (index < message.length) {
          typingElement.innerHTML += message.charAt(index);
          index++;
          setTimeout(typeEffect, 100); // t·ªëc ƒë·ªô g√µ (ms)
        }
      }

      window.onload = function () {
        typeEffect();
      };
  </script>
</body>
</html>
